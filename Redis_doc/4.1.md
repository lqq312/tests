# RDB持久化

在默认情况下，Redis将数据库快照保存在名字为dump.rdb的二进制文件中。
对Redis进行设置，让它在“N秒内数据集至少有M个改动”这一条件被满足时，自动保存一次数据集。

例如：设置Redis在满足60秒内至少有1000个键被改变这一条件时，自动保存一次数据。
    
    save 60 1000

这种持久化的方式也称为快照（snapshot）。

你也可以通过调用SAVE或者BGSAVE，手动让Redis进行数据集保存操作。

## 快照的动作方式

当Redis需要保存dump.rdb文件时，服务器执行以下操作：

* Redis调用fork()，同时拥有父进程和子进程；
* 子进程将数据集写入到一个临时RDB文件中；
* 当子进程完成对新RDB文件的写入时，Redis用新RDB文件替换原来的RDB文件，并删除旧的RDB文件。

这种工作方式使得Redis可以从写时复制（copy-on-write）机制中获益。