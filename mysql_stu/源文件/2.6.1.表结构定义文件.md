[TOC]

# 概述

因为 MySQL插件式存储引擎的体系结构的关系， MySQL数据的存储是根据表进行的，每个表都会有与之对应的文件。但不论表采用何种存储引擎，MySQL都有一个以frm为后缀名的文件，这个文件记录了该表的表结构定义。
frm还用来存放视图的定义,如用户创建了一个v_a视图，那么对应地会产生个 v_a.frm文件，用来记录视图的定义，该文件是文本文件。

## 查看MySQL的表结构定义

MySQL的表结构定义文件是一个二进制格式的文件，无法通过cat等命令直接查看。

```
shell> file tb0.frm 
		tb0.frm: MySQL table definition file Version 9
```

可通过hexdump查看该文件的二进制内容。

```
shell> hexdump tb0.frm
    0000000 01fe 0c09 0003 1000 0001 3000 0000 0010
    0000010 0005 0000 0000 0000 0000 0200 0008 0008
    0000020 0500 0000 0000 002d 0000 0000 0000 1000
    0000030 0000 2800 00c6 1e00 0000 0000 0000 0000
    0000040 2f2f 0000 0020 0000 0000 0000 0000 0000
    0000050 0000 0000 0000 0000 0000 0000 0000 0000
    *
    0001000 0000 0000 0002 00ff 0000 0000 0000 0000
    0001010 00ff 0000 0000 0600 4900 6e6e 446f 0042
    0001020 0000 0000 0a00 0000 0000 0000 0000 0000
    0001030 0000 0000 0000 0000 0000 0000 0000 0000
    *
    0002000 016c 1000 0000 0000 0000 0000 0000 0000
    0002010 0000 0000 0000 0000 0000 0000 0000 0000
    *
    0002100 0001 0001 0036 000b 0000 0005 0005 0000
    0002110 0000 0000 0000 0050 0016 0000 0000 0000
    0002120 0036 0102 1402 2029 2020 2020 2020 2020
    0002130 2020 2020 2020 2020 2020 2020 2020 2020
    0002140 2020 2020 2020 2020 2020 2020 2020 0020
    0002150 0004 6903 0064 0304 0b0b 0200 0000 401b
    0002160 0000 0300 002d ff00 6469 00ff          
    000216c

shell> hexdump -C tb0.frm
    00000000  fe 01 09 0c 03 00 00 10  01 00 00 30 00 00 10 00  |...........0....|
    00000010  05 00 00 00 00 00 00 00  00 00 00 02 08 00 08 00  |................|
    00000020  00 05 00 00 00 00 2d 00  00 00 00 00 00 00 00 10  |......-.........|
    00000030  00 00 00 28 c6 00 00 1e  00 00 00 00 00 00 00 00  |...(............|
    00000040  2f 2f 00 00 20 00 00 00  00 00 00 00 00 00 00 00  |//.. ...........|
    00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    *
    00001000  00 00 00 00 02 00 ff 00  00 00 00 00 00 00 00 00  |................|
    00001010  ff 00 00 00 00 00 00 06  00 49 6e 6e 6f 44 42 00  |.........InnoDB.|
    00001020  00 00 00 00 00 0a 00 00  00 00 00 00 00 00 00 00  |................|
    00001030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    *
    00002000  6c 01 00 10 00 00 00 00  00 00 00 00 00 00 00 00  |l...............|
    00002010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    *
    00002100  01 00 01 00 36 00 0b 00  00 00 05 00 05 00 00 00  |....6...........|
    00002110  00 00 00 00 00 00 50 00  16 00 00 00 00 00 00 00  |......P.........|
    00002120  36 00 02 01 02 14 29 20  20 20 20 20 20 20 20 20  |6.....)         |
    00002130  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
    00002140  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 00  |               .|
    00002150  04 00 03 69 64 00 04 03  0b 0b 00 02 00 00 1b 40  |...id..........@|
    00002160  00 00 00 03 2d 00 00 ff  69 64 ff 00              |....-...id..|
    0000216c
```

使用“hexdump -C”可看出.frm文件中是包含有InnoDB的关键字，但仍无法查看表结构的详细内容。

方法1：登陆mysql后通过mysql的命令查看指定表的表结构。

```
mysql> > show create table tb0\G
*************************** 1. row ***************************
       Table: tb0
Create Table: CREATE TABLE `tb0` (
  `id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
```

方法2：通过mysqlfrm命令查看指定表的表结构

```
shell> yum -y localinstall ./mysql-connector-python-2.1.8-1.el7.x86_64.rpm ./mysql-utilities-1.6.5-1.el7.noarch.rpm
shell> mysqlfrm --diagnostic tb0.frm 
    # WARNING: Cannot generate character set or collation names without the --server option.
    # CAUTION: The diagnostic mode is a best-effort parse of the .frm file. As such, it may not identify all of the components of the table correctly. This is especially true for damaged files. It will also not read the default values for the columns and the resulting statement may not be syntactically correct.
    # Reading .frm file for tb0.frm:
    # The .frm file is a TABLE.
    # CREATE TABLE Statement:

    CREATE TABLE `tb0` (
      `id` int(11) NOT NULL 
    ) ENGINE=InnoDB;

    #...done.
```

