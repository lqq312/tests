[TOC]

# 日期时间型的特性

```
+-----------+---------+---------------------------------------------------+
|    TYPE   |  BYTES  |                        RANGE                      |
+-----------+---------+---------------------------------------------------+
| DATETIME  |  8      | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59         |
| DATE      |  3      | 1000-01-01 ~ 9999-12-31                           |
| TIMESTAMP |  4      | 1970-01-01 00:00:00 UTC ~ 2038-01-19 03:14:07 UTC |
| YEAR(2)   |  1      | 1970 ~ 2070                                       |
| YEAR(4)   |  1      | 1901 ~ 2155                                       |
| TIME      |  3      | -838:59:59 ~ 838:59:59                            |
+-----------+---------+---------------------------------------------------+
```

1. MySQL 6.5.4版本开始支持微秒。
2. 支持类型： TIME、DATETIME、TIMESTAME
3. type_name(fsp)，fsp最大精度为6（见示例1）。
4. DATETIME与TIMESTAMP最大的区别在于TIMESTAMP有时区而DATETIME没有时区，而实际上可将“TIMESTAME”理解为从“1970-01-01 00:00:00”经过的秒数（见示例2）。
5. 在建表时指定字段在更新数据时自动更新时间戳（见示例3）。
6. 在建表时如指定某列为“DATETIME(6)”则在插入数据时该列的值也只有8个Bytes。

## 示例1——显示当前时间精确到微秒

```
mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2020-03-23 23:30:09 |
+---------------------+

mysql> select now(6);
+----------------------------+
| now(6)                     |
+----------------------------+
| 2020-03-23 23:30:23.755911 |
+----------------------------+
```

## 示例2——DATETIME与TIMESTAMP的区别

```
mysql> create table t6 (a timestamp , b datetime); 
mysql> insert into t6 value (now(),now());
mysql> select * from t6;
+---------------------+---------------------+
| a                   | b                   |
+---------------------+---------------------+
| 2020-03-23 23:32:52 | 2020-03-23 23:32:52 |
+---------------------+---------------------+

mysql> select @@time_zone;
+-------------+
| @@time_zone |
+-------------+
| SYSTEM      |
+-------------+
mysql> set time_zone="+00:00";

mysql> select * from t6;
+---------------------+---------------------+
| a                   | b                   |
+---------------------+---------------------+
| 2020-03-23 15:32:52 | 2020-03-23 23:32:52 |
+---------------------+---------------------+
```

## 示例3——自动更新时间戳

```
mysql> CREATE TABLE t7 (
    -> id INT NOT NULL auto_increment PRIMARY KEY,
    -> num INT NOT NULL,
    -> time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    -> date datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP );
mysql> insert into t7 (num) values (1),(2),(3);
mysql> select * from t7;
+----+-----+---------------------+---------------------+
| id | num | time                | date                |
+----+-----+---------------------+---------------------+
|  1 |   1 | 2020-03-23 23:45:23 | 2020-03-23 23:45:23 |
|  2 |   2 | 2020-03-23 23:45:23 | 2020-03-23 23:45:23 |
|  3 |   3 | 2020-03-23 23:45:23 | 2020-03-23 23:45:23 |
+----+-----+---------------------+---------------------+
mysql> update t7 set num=num*2 where num=3;
mysql> select * from t7;
+----+-----+---------------------+---------------------+
| id | num | time                | date                |
+----+-----+---------------------+---------------------+
|  1 |   1 | 2020-03-23 23:45:23 | 2020-03-23 23:45:23 |
|  2 |   2 | 2020-03-23 23:45:23 | 2020-03-23 23:45:23 |
|  3 |   6 | 2020-03-23 23:46:20 | 2020-03-23 23:46:20 |
+----+-----+---------------------+---------------------+
```

