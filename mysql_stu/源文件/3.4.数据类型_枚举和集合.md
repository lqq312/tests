[TOC]

# 枚举和集合

1. ENUM（枚举）类型最多允许65535个值，枚举类型是类似于INT型，对性能不会有影响（注意：枚举类型必需与“strict_trans_tables”的sql_mode一并使用）。
2. SET（集合）类型最多允许64个值。
3. 这两种类型可以通过“sql_mode”参数可用于约束检查，如果将“sql_mode”清空后再插入ENUM没有的字符则不会插入任何字符至表中（见示例1）。
4. 枚举类型的排序并不是按集合中元素进行排序，而是按枚举中数组的顺序进行排序（见示例2）。

**注意：如需按集合类型中的元素的顺序进行排序则需要将该列转换成“CHAR”类型（见示例2）。**



枚举类型和集合类型的区别在于：

* 枚举 (ENUM) 类型，最多可以定义 65535 种不同的字符串从中做出选择，只能并且必须选择其中一种，占用存储空间是一个或两个字节，由枚举值的数目决定。
* 集合 (SET) 类型，最多可以有 64 个成员，可以选择其中的零个到不限定的多个，占用存储空间是一个到八个字节，由集合可能的成员数目决定。

## 示例1——约束检查

```
mysql> create table t5 (id int not null auto_increment primary key, sex enum("male","female") not null);
mysql> insert into t5 (sex) values ("male"),("female"),("abc");
ERROR 1265 (01000): Data truncated for column 'sex' at row 3
mysql> select * from t5;
Empty set (0.00 sec)

mysql> set sql_mode="";
mysql> insert into t5 (sex) values ("male"),("female"),("abc");
mysql> select * from t5;
+----+--------+
| id | sex    |
+----+--------+
| 11 | male   |
| 12 | female |
| 13 |        |
+----+--------+
```



## 示例2——枚举类型排序

枚举类型无法按照列的字段进行排序，其默认按照表定义时的顺序进行递增排序，枚举类型在表定义时会按照顺序为每个元素一个编号，在数据插入时只会引用对应值的编号而不会按照其字符串的顺序进行排序。

```
mysql> create table t4 (s1 enum("male","female"));
mysql> insert into t4 values ("male"),("female"),("male");
mysql> select * from t4;
+--------+
| s1     |
+--------+
| male   |
| female |
| male   |
+--------+
mysql> select * from t4 order by s1;
+--------+
| s1     |
+--------+
| male   |
| male   |
| female |
+--------+

mysql> select * from t4 order by concat(s1);
+--------+
| s1     |
+--------+
| female |
| male   |
| male   |
+--------+

mysql> select * from t4 order by cast(s1 as char) asc;
+--------+
| s1     |
+--------+
| female |
| male   |
| male   |
+--------+
```

如需按字符器的顺序对枚举类型的值进行排序则需要使用“concat()”函数对这个列进行字符串化处理，然后进行排序。或使用“cast()”函数将对应列转换成字符串类型，然后进行排序。