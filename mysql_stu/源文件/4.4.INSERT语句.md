[TOC]

# INSERT语句

## 语法1
语法1适用于向表中插入一行或多行数据，如插入一行则指定“VALUE”，如插入多行则可以指定为“VALUES”。

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name
    [PARTITION (partition_name [, partition_name] ...)]
    [(col_name [, col_name] ...)]
    {VALUES | VALUE} (value_list) [, (value_list)] ...
    [ON DUPLICATE KEY UPDATE assignment_list]
```

## 语法2
适用于向表中插入一行数据，类似于“UPDATE”。

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name
    [PARTITION (partition_name [, partition_name] ...)]
    SET assignment_list
    [ON DUPLICATE KEY UPDATE assignment_list]
```

## 语法3
语法3适用于从其他表中查询部分字段的数据，将查询后的结果插入至表中。**查询的结果必需与插入的表中的对应字段的个数和字段属性相同。**
```
INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name
    [PARTITION (partition_name [, partition_name] ...)]
    [(col_name [, col_name] ...)]
    SELECT ...
    [ON DUPLICATE KEY UPDATE assignment_list]
```

## value说明
```
{expr | DEFAULT}
```

## value_list说明
```
value [, value] ...
```

## assignment说明
```
col_name = value
```

## assignment_list说明
```
assignment [, assignment] ...
```

> IGNORE：当“INSERT”的语句中的数据与已有的数据中的主键或唯一键重复时忽略插入[示例1](##示例1)。
>
> ON DUPLICATE KEY UPDATE assignment_list：当INSERT的数据与已有的主键或唯一键重复时将非唯一键或主键的值更新为指定的value[示例2](##示例2)。

# 示例

## 示例1
```
mysql> SHOW CREATE TABLE t1\G
        *************************** 1. row ***************************
               Table: t1
        Create Table: CREATE TABLE `t1` (
          `id` int(11) NOT NULL,
          `num` int(11) NOT NULL,
          PRIMARY KEY (`id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
mysql> SELECT * FROM t1;
        +----+-----+
        | id | num |
        +----+-----+
        |  1 |   2 |
        +----+-----+
mysql> INSERT IGNORE INTO t1 (id,num) VALUE (1,1);
        Query OK, 0 rows affected, 1 warning (0.01 sec)
mysql> SHOW WARNINGS;
        +---------+------+---------------------------------------+
        | Level   | Code | Message                               |
        +---------+------+---------------------------------------+
        | Warning | 1062 | Duplicate entry '1' for key 'PRIMARY' |
        +---------+------+---------------------------------------+
mysql> SELECT * FROM t1;
        +----+-----+
        | id | num |
        +----+-----+
        |  1 |   2 |
        +----+-----+
```



## 示例2
```
mysql> DESC t1;
        +-------+---------+------+-----+---------+-------+
        | Field | Type    | Null | Key | Default | Extra |
        +-------+---------+------+-----+---------+-------+
        | id    | int(11) | NO   | PRI | NULL    |       |
        | num   | int(11) | NO   |     | NULL    |       |
        +-------+---------+------+-----+---------+-------+
mysql> SELECT * FROM t1;
        +----+-----+
        | id | num |
        +----+-----+
        |  1 |   2 |
        +----+-----+
mysql> INSERT INTO t1 (id, num) VALUE (1,1) ON DUPLICATE KEY UPDATE num=1;
        Query OK, 2 rows affected (0.06 sec)
mysql> SELECT * FROM t1;
        +----+-----+
        | id | num |
        +----+-----+
        |  1 |   1 |
        +----+-----+
```
